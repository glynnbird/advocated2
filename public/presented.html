<!DOCTYPE html>
<html>

<head>
  <title>Envoy Demo</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css" media="screen,projection" />
  <link type="text/css" rel="stylesheet" href="/css/envoydemo.css" media="screen,projection" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>

  <nav class="teal lighten-2">
    <div class="nav-wrapper">
      <a href="/" class="brand-logo">Advocated</a>
      <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        <li><a href="attended.html">Attended</a></li>
        <li><a href="presented.html">Presented</a></li>
        <li><a href="blogged.html">Blogged</a></li>     
        <li><a href="pr.html">PR</a></li>    
        <li class="synclink"><a href="Javascript:sync()"><i class="material-icons">swap_vert</i></a></li>
      </ul>
      <ul class="side-nav" id="mobile-demo">
        <li><a href="attended.html">Attended</a></li>
        <li><a href="presented.html">Presented</a></li>
        <li><a href="blogged.html">Blogged</a></li>     
        <li><a href="pr.html">PR</a></li>    
        <li class="synclink"><a href="Javascript:sync()"><i class="material-icons">swap_vert</i></a></li>
      </ul>
    </div>
  </nav>


  <div class="container">
    <h2>I Presented At An Event</h2>
      
    <form id="presented">
      <input id="collection" type="hidden" name="collection" value="session" />
      <div class="row">
        <div class="input-field col s12">
          <select id="sessionevent" name="event">
            <option value="">...</option>
            <option value="123">123</option>
          </select>
          <label for="sessionevent">Event</label>
        </div>
      </div>
      <div class="row">      
        <div class="input-field col s12">
          <input id="sessiontitle" name="title" type="text" placeholder="Session Title" value="" class="" />
          <label for="sessiontitle">Title</label>
        </div>
      </div>
      <div class="row"> 
        <div class="col s12">
          <label for="sessionstart">Date</label>
          <input id="sessionstart" name="dtstart" type="date" placeholder="YYYY-MM-DD" value="" class="validate" />
        </div>
      </div>
      <div class="row">         
        <div class="input-field col s12">
          <textarea id="sessiondescription" name="description" class="materialize-textarea"></textarea>
          <label for="sessiondescription">Description</label>
        </div>
      </div>
      <div class="row">            
        <div class="input-field col s12">
          <input id="sessionattendees" name="attendees" type="number" placeholder="Approximate number of attendees" value="" class="">
          <label for="sessionattendees">Attendees</label>
        </div>
      </div>
      <div class="row">          
        <div class="input-field col s12">
          <div>
            <input id="categories1" name="categories" type="checkbox" data-meta="grouped" value="Conference"/>
            <label for="categories1">Conference</label>
          </div>
          <div>
            <input id="categories2" name="categories" type="checkbox" data-meta="grouped" value="Meetup" />
            <label for="categories2">Meetup</label>
          </div>
          <div>
            <input id="categories3" name="categories" type="checkbox" data-meta="grouped" value="Hackathon" />
            <label for="categories3">Hackathon</label>
          </div>
          <div>
            <input id="categories4" name="categories" type="checkbox" data-meta="grouped" value="Webinar" />
            <label for="categories4">Hackathon</label>
          </div>
        </div>
      </div>
      <div class="row">  
        <div class="input-field col s12">
          <div>
            <input id="sponsored" name="sponsored" type="checkbox" value="Sponsored">
            <label for="sponsored">Sponsored</label>
          </div>
        </div>
      </div>
      <div class="row">        
        <div class="input-field col s12">
          <input id="sessiontags" name="tags" type="text" placeholder="e.g. Node,Geo" value="" class="">
          <label for="sessiontags">Tags</label>
        </div>
      </div>
      <div class="row">        
        <div class="input-field col s12">
          <textarea id="sessioncomments" name="comments" class="materialize-textarea"></textarea>
          <label for="sessioncomments">Comments</label>
        </div>
      </div>
      <div class="row">
        <div id="error"></div>
        <div id="message"> </div>
        <button type="submit" class="validate btn">Submit</button>
      </div>


 


    </form>
  </div>

  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/pouchdb/5.4.4/pouchdb.min.js"></script>
  <script type="text/javascript" src="/js/app.js"></script>

  <script>
      $( document ).ready(function() {
        $('#presented' ).on( "submit", function( event ) {
            event.preventDefault();
            submitForm('#presented');
        });



        // fill the events control with a list of events
        var prefillEvents = function() {
          var map = function(doc) {
            if (doc.collection === 'event') {
              emit(doc.ts, null);
            }
          }
          db.query(map, {include_docs:true, descending:true, limit: 50}).then(function(data) {
            console.log(data);
            var html = '<option value="">---choose event---</option>\n';
            for(var i in data.rows) {
              var doc = data.rows[i].doc;
              html += '<option value="' + doc._id + '">' + doc.title + '</option>\n';
            }
            console.log("HTML",html);
            $('#sessionevent').html(html);
            $('select').material_select();
          });
        }


        prefillEvents();
         // prefillPresented('');
          //initCheckboxes('', '');
      });
  </script>

</body>

</html>